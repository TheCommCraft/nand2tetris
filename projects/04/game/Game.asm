@SCREEN
M=-1
(MAINLOOP)
@MAINLOOP
D=A
@MOVESCREEN_RETURN
M=D
@MOVESCREEN
0;JMP


(MOVESCREEN)
@SCREEN
D=A
@MOVESCREEN_SCREENPOS
M=D
(MOVESCREEN_LOOP)
@MOVESCREEN_SCREENPOS
A=M
D=M
@MOVESCREEN_SKIP
D;JGE
@MOVESCREEN_SCREENPOS
A=M
D=M
@LSHIFT1_IN_A
M=D
@MOVESCREEN_SCREENPOS
A=M+1
D=M
@LSHIFT1_IN_B
M=D
@MOVESCREEN_APPLY_SHIFTED
D=A
@LSHIFT1_RETURN
M=D
@LSHIFT1
0;JMP
(MOVESCREEN_APPLY_SHIFTED)
@LSHIFT1_IN_A
D=M
@MOVESCREEN_SCREENPOS
A=M
M=D
@LSHIFT1_IN_B
D=M
@MOVESCREEN_SCREENPOS
A=M+1
M=D
(MOVESCREEN_SKIP)
@MOVESCREEN_SCREENPOS
M=M+1
D=M
@KBD
D=A-D
@MOVESCREEN_LOOP
D;JGT
@MOVESCREEN_RETURN
A=M
0;JMP


// REMOVE FROM HERE
@R0
D=M
@LSHIFT1_IN_A
M=D
@R1
D=M
@LSHIFT1_IN_B
M=D
@SETVAL
D=A
@LSHIFT1_RETURN
M=D
@LSHIFT1
0;JMP
(SETVAL)
@LSHIFT1_IN_A
D=M
@R0
M=D
@LSHIFT1_IN_B
D=M
@R1
M=D
@END
0;JMP
// TIL HERE


(LSHIFT1)
@LSHIFT1_IN_B
D=M
M=D+M
@LSHIFT1_IN_A
D=M
@LSHIFT1_NO_CARRY
D;JGE
@LSHIFT1_IN_B
M=M+1
(LSHIFT1_NO_CARRY)
@LSHIFT1_IN_A
D=M
M=D+M
@LSHIFT1_RETURN
A=M
0;JMP


(END)
@END
0;JMP

